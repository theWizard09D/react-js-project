{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Downloads\\\\Cheater react\\\\BookMovieApp\\\\src\\\\screens\\\\confirmation\\\\Confirmation.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Header from \"../../common/header/Header\";\nimport \"./Confirmation.css\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Input from \"@material-ui/core/Input\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Button from \"@material-ui/core/Button\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport PropTypes from \"prop-types\";\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\nimport green from \"@material-ui/core/colors/green\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst styles = theme => ({\n  close: {\n    width: theme.spacing.unit * 4,\n    height: theme.spacing.unit * 4\n  },\n  success: {\n    color: green[600]\n  }\n});\n\nconst Confirmation = props => {\n  _s();\n\n  const [open, setOpen] = useState(false);\n  const [bookingId, setBookingId] = useState(\"\");\n  const [couponCode, setCouponCode] = useState(\"\");\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [originalTotalPrice, setOriginalTotalPrice] = useState(0);\n  useEffect(() => {\n    const price = parseInt(props.location.bookingSummary.unitPrice, 10) * parseInt(props.location.bookingSummary.tickets, 10);\n    setTotalPrice(price);\n    setOriginalTotalPrice(price);\n  }, []);\n\n  const confirmBookingHandler = () => {\n    let data = JSON.stringify({\n      coupon_code: couponCode,\n      show_id: props.location.bookingSummary.showId,\n      tickets: [props.location.bookingSummary.tickets.toString()]\n    });\n    fetch(props.baseUrl + \"bookings\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Cache-Control\": \"no-cache\",\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"access-token\")\n      },\n      body: data\n    }).then(response => response.json()).then(data => {\n      setBookingId(data.reference_number);\n    });\n    setOpen(true);\n  };\n\n  const snackBarCloseHandler = () => {\n    props.history.push(\"/\");\n  };\n\n  const couponCodeChangeHandler = e => {\n    setCouponCode(e.target.value);\n  };\n\n  const couponApplyHandler = () => {\n    fetch(props.baseUrl + \"movies/\" + props.match.params.id, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Cache-Control\": \"no-cache\",\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"access-token\")\n      }\n    }).then(response => response.json()).then(data => {\n      let discountValue = data.value;\n\n      if (discountValue !== undefined && discountValue > 0) {\n        setTotalPrice(originalTotalPrice - originalTotalPrice * discountValue / 100);\n      } else {\n        setTotalPrice(originalTotalPrice);\n      }\n    });\n  };\n\n  const {\n    classes\n  } = props;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Details\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"confirmation marginTop16\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/bookshow/\" + props.match.params.id,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            className: \"back\",\n            children: \"< Back to Book Show\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          className: \"cardStyle\",\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"headline\",\n              component: \"h2\",\n              children: \"SUMMARY\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"coupon-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"confirmLeft\",\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  children: \"Location:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  children: props.location.bookingSummary.location\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"coupon-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"confirmLeft\",\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  children: \"Theatre:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  children: props.location.bookingSummary.theatre\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"coupon-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"confirmLeft\",\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  children: \"Language:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  children: props.location.bookingSummary.language\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"coupon-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"confirmLeft\",\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  children: \"Show Date:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  children: props.location.bookingSummary.showDate\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"coupon-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"confirmLeft\",\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  children: \"Tickets:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  children: props.location.bookingSummary.tickets.toString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"coupon-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"confirmLeft\",\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  children: \"Unit Price:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  children: props.location.bookingSummary.unitPrice\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"coupon-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(FormControl, {\n                  className: \"formControl\",\n                  children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                    htmlFor: \"coupon\",\n                    children: /*#__PURE__*/_jsxDEV(Typography, {\n                      children: \"Coupon Code\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 195,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 194,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Input, {\n                    id: \"coupon\",\n                    onChange: couponCodeChangeHandler\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 197,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"marginApply\",\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"contained\",\n                  onClick: couponApplyHandler,\n                  color: \"primary\",\n                  children: \"Apply\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"coupon-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"confirmLeft\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"bold\",\n                  children: \"Total Price:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: parseInt(totalPrice, 10)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              onClick: confirmBookingHandler,\n              color: \"primary\",\n              children: \"Confirm Booking\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      anchorOrigin: {\n        vertical: \"top\",\n        horizontal: \"center\"\n      },\n      className: \"snackbar\",\n      open: open,\n      onClose: snackBarCloseHandler,\n      message: /*#__PURE__*/_jsxDEV(\"span\", {\n        id: \"client-snackbar\",\n        className: classes.success,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"confirm\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(CheckCircleIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message\",\n            children: [\" Booking Confirmed! \", bookingId]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 11\n      }, this),\n      action: [/*#__PURE__*/_jsxDEV(IconButton, {\n        \"aria-label\": \"Close\",\n        color: \"inherit\",\n        className: classes.close,\n        onClick: snackBarCloseHandler,\n        children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 13\n        }, this)\n      }, \"close\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 11\n      }, this)]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Confirmation, \"6WxQ/KzFTDZW4LXwG/bPVUSAdO8=\");\n\n_c = Confirmation;\nConfirmation.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(Confirmation);\n\nvar _c;\n\n$RefreshReg$(_c, \"Confirmation\");","map":{"version":3,"sources":["C:/Users/DELL/Downloads/Cheater react/BookMovieApp/src/screens/confirmation/Confirmation.js"],"names":["React","useState","useEffect","Header","Typography","Input","InputLabel","FormControl","Button","Card","CardContent","Snackbar","IconButton","CloseIcon","withStyles","PropTypes","CheckCircleIcon","green","Link","styles","theme","close","width","spacing","unit","height","success","color","Confirmation","props","open","setOpen","bookingId","setBookingId","couponCode","setCouponCode","totalPrice","setTotalPrice","originalTotalPrice","setOriginalTotalPrice","price","parseInt","location","bookingSummary","unitPrice","tickets","confirmBookingHandler","data","JSON","stringify","coupon_code","show_id","showId","toString","fetch","baseUrl","method","headers","Authorization","sessionStorage","getItem","body","then","response","json","reference_number","snackBarCloseHandler","history","push","couponCodeChangeHandler","e","target","value","couponApplyHandler","match","params","id","discountValue","undefined","classes","theatre","language","showDate","vertical","horizontal","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Header from \"../../common/header/Header\";\nimport \"./Confirmation.css\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Input from \"@material-ui/core/Input\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Button from \"@material-ui/core/Button\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport PropTypes from \"prop-types\";\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\nimport green from \"@material-ui/core/colors/green\";\nimport { Link } from \"react-router-dom\";\n\nconst styles = (theme) => ({\n  close: {\n    width: theme.spacing.unit * 4,\n    height: theme.spacing.unit * 4,\n  },\n  success: {\n    color: green[600],\n  },\n});\n\nconst Confirmation = (props) => {\n  const [open, setOpen] = useState(false);\n  const [bookingId, setBookingId] = useState(\"\");\n  const [couponCode, setCouponCode] = useState(\"\");\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [originalTotalPrice, setOriginalTotalPrice] = useState(0);\n\n  useEffect(() => {\n    const price =\n      parseInt(props.location.bookingSummary.unitPrice, 10) *\n      parseInt(props.location.bookingSummary.tickets, 10);\n    setTotalPrice(price);\n    setOriginalTotalPrice(price);\n  }, []);\n\n  const confirmBookingHandler = () => {\n    let data = JSON.stringify({\n      coupon_code: couponCode,\n      show_id: props.location.bookingSummary.showId,\n      tickets: [props.location.bookingSummary.tickets.toString()],\n    });\n\n    fetch(props.baseUrl + \"bookings\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Cache-Control\": \"no-cache\",\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"access-token\"),\n      },\n      body: data,\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        setBookingId(data.reference_number);\n      });\n\n    setOpen(true);\n  };\n\n  const snackBarCloseHandler = () => {\n    props.history.push(\"/\");\n  };\n\n  const couponCodeChangeHandler = (e) => {\n    setCouponCode(e.target.value);\n  };\n\n  const couponApplyHandler = () => {\n    fetch(props.baseUrl + \"movies/\" + props.match.params.id, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Cache-Control\": \"no-cache\",\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"access-token\"),\n      },\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        let discountValue = data.value;\n        if (discountValue !== undefined && discountValue > 0) {\n          setTotalPrice(\n            originalTotalPrice - (originalTotalPrice * discountValue) / 100\n          );\n        } else {\n          setTotalPrice(originalTotalPrice);\n        }\n      });\n  };\n\n  const { classes } = props;\n\n  return (\n    <div className=\"Details\">\n      <Header />\n\n      <div className=\"confirmation marginTop16\">\n        <div>\n          <Link to={\"/bookshow/\" + props.match.params.id}>\n            <Typography className=\"back\">&#60; Back to Book Show</Typography>\n          </Link>\n          <br />\n\n          <Card className=\"cardStyle\">\n            <CardContent>\n              <Typography variant=\"headline\" component=\"h2\">\n                SUMMARY\n              </Typography>\n              <br />\n\n              <div className=\"coupon-container\">\n                <div className=\"confirmLeft\">\n                  <Typography>Location:</Typography>\n                </div>\n                <div>\n                  <Typography>\n                    {props.location.bookingSummary.location}\n                  </Typography>\n                </div>\n              </div>\n              <br />\n\n              <div className=\"coupon-container\">\n                <div className=\"confirmLeft\">\n                  <Typography>Theatre:</Typography>\n                </div>\n                <div>\n                  <Typography>\n                    {props.location.bookingSummary.theatre}\n                  </Typography>\n                </div>\n              </div>\n              <br />\n\n              <div className=\"coupon-container\">\n                <div className=\"confirmLeft\">\n                  <Typography>Language:</Typography>\n                </div>\n                <div>\n                  <Typography>\n                    {props.location.bookingSummary.language}\n                  </Typography>\n                </div>\n              </div>\n              <br />\n\n              <div className=\"coupon-container\">\n                <div className=\"confirmLeft\">\n                  <Typography>Show Date:</Typography>\n                </div>\n                <div>\n                  <Typography>\n                    {props.location.bookingSummary.showDate}\n                  </Typography>\n                </div>\n              </div>\n              <br />\n\n              <div className=\"coupon-container\">\n                <div className=\"confirmLeft\">\n                  <Typography>Tickets:</Typography>\n                </div>\n                <div>\n                  <Typography>\n                    {props.location.bookingSummary.tickets.toString()}\n                  </Typography>\n                </div>\n              </div>\n              <br />\n\n              <div className=\"coupon-container\">\n                <div className=\"confirmLeft\">\n                  <Typography>Unit Price:</Typography>\n                </div>\n                <div>\n                  <Typography>\n                    {props.location.bookingSummary.unitPrice}\n                  </Typography>\n                </div>\n              </div>\n              <br />\n\n              <div className=\"coupon-container\">\n                <div>\n                  <FormControl className=\"formControl\">\n                    <InputLabel htmlFor=\"coupon\">\n                      <Typography>Coupon Code</Typography>\n                    </InputLabel>\n                    <Input id=\"coupon\" onChange={couponCodeChangeHandler} />\n                  </FormControl>\n                </div>\n                <div className=\"marginApply\">\n                  <Button\n                    variant=\"contained\"\n                    onClick={couponApplyHandler}\n                    color=\"primary\"\n                  >\n                    Apply\n                  </Button>\n                </div>\n              </div>\n              <br />\n              <br />\n\n              <div className=\"coupon-container\">\n                <div className=\"confirmLeft\">\n                  <span className=\"bold\">Total Price:</span>\n                </div>\n                <div>{parseInt(totalPrice, 10)}</div>\n              </div>\n              <br />\n\n              <Button\n                variant=\"contained\"\n                onClick={confirmBookingHandler}\n                color=\"primary\"\n              >\n                Confirm Booking\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n\n      <Snackbar\n        anchorOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\",\n        }}\n        className=\"snackbar\"\n        open={open}\n        onClose={snackBarCloseHandler}\n        message={\n          <span id=\"client-snackbar\" className={classes.success}>\n            <div className=\"confirm\">\n              <div>\n                <CheckCircleIcon />\n              </div>\n              <div className=\"message\"> Booking Confirmed! {bookingId}</div>\n            </div>\n          </span>\n        }\n        action={[\n          <IconButton\n            key=\"close\"\n            aria-label=\"Close\"\n            color=\"inherit\"\n            className={classes.close}\n            onClick={snackBarCloseHandler}\n          >\n            <CloseIcon />\n          </IconButton>,\n        ]}\n      />\n    </div>\n  );\n};\n\nConfirmation.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Confirmation);\n"]},"metadata":{},"sourceType":"module"}